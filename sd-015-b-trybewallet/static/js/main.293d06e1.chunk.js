(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,a){e.exports=a(45)},38:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),i=a(31),u=(a(38),a(12)),o=a(15),s=a(29),d=a(30),p=a(9),h={email:""},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_USER_LOGIN":return Object(p.a)(Object(p.a)({},e),{},{email:t.payload});default:return e}},b=a(32),E={exchangeRates:{},expenses:[],currencies:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_EXPENSES":return Object(p.a)(Object(p.a)({},e),{},{expenses:[].concat(Object(b.a)(e.expenses),[t.payload])});case"GET_EXCHANGES_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{exchangeRates:t.payload.exchangeRates});case"DELETE_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload.id}))});default:return e}},f=Object(o.combineReducers)({user:m,wallet:v}),g=Object(o.createStore)(f,Object(s.composeWithDevTools)(Object(o.applyMiddleware)(d.a))),j=a(2),y=a(17),O=a(3),x=a(4),C=a(7),S=a(6),k=a(5),w=a(14),R=a.n(w),D=a(18),N=function(){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))},T=function(e){return function(){var t=Object(D.a)(R.a.mark((function t(a){var n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N();case 3:return n=t.sent,t.abrupt("return",a({type:"GET_EXCHANGES_SUCCESS",payload:Object(p.a)(Object(p.a)({},e),{},{exchangeRates:n})}));case 7:t.prev=7,t.t0=t.catch(0),a({type:"GET_EXCHANGES_FAIL",error:"N\xe3o conseguimos encontrar o que foi solicitado"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},_=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).state={disableSubmit:!0},e.handleChange=e.handleChange.bind(Object(C.a)(e)),e.enableSubmitButton=e.enableSubmitButton.bind(Object(C.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(C.a)(e)),e}return Object(x.a)(a,[{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(y.a)({},n,r),(function(){return t.enableSubmitButton()}))}},{key:"enableSubmitButton",value:function(){var e=this.state,t=e.email,a=e.password,n=/\S+@\S+\.\S+/.test(t),r=!!a&&a.length>=6;n&&r?this.setState({disableSubmit:!1}):this.setState({disableSubmit:!0})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.history;(0,t.dispatchUser)(this.state.email),a.push("/carteira")}},{key:"render",value:function(){var e=this.handleChange,t=this.handleSubmit,a=this.state.disableSubmit;return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("label",{htmlFor:"email-input"},"Email:",r.a.createElement("input",{type:"email",name:"email",id:"email-input","data-testid":"email-input",onChange:e})),r.a.createElement("label",{htmlFor:"password-input"},"Senha:",r.a.createElement("input",{type:"password",name:"password",id:"password-input","data-testid":"password-input",onChange:e})),r.a.createElement("button",{type:"submit",disabled:a,onClick:function(e){return t(e)}},"Entrar"))}}]),a}(r.a.Component),F=Object(u.b)(null,(function(e){return{dispatchUser:function(t){return e(function(e){return{type:"SEND_USER_LOGIN",payload:e}}(t))}}}))(_),L=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).state={allCurrencies:[]},e.updateExchangeRates=e.updateExchangeRates.bind(Object(C.a)(e)),e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.updateExchangeRates()}},{key:"updateExchangeRates",value:function(){var e=Object(D.a)(R.a.mark((function e(){var t,a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getExchangeRates,e.next=3,t();case 3:a=this.props.exchangeRates,n=Object.keys(a).filter((function(e){return"USDT"!==e})),this.setState({allCurrencies:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.allCurrencies,t=this.props.handleChange;return r.a.createElement("label",{htmlFor:"currency"}," Moeda: ",r.a.createElement("select",{"data-testid":"currency-input",name:"currency",id:"currency",onChange:t},e.map((function(e,t){return r.a.createElement("option",{key:"".concat(e).concat(t),value:e},e)}))))}}]),a}(n.Component),U=Object(u.b)((function(e){return{exchangeRates:e.wallet.exchangeRates}}),(function(e){return{getExchangeRates:function(t){return e(T(t))}}}))(L),A=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement("label",{htmlFor:"description"}," Descri\xe7\xe3o: ",r.a.createElement("input",{"data-testid":"description-input",type:"text",name:"description",id:"description",onChange:e}))}}]),a}(n.Component),B=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement("label",{htmlFor:"method"}," M\xe9todo: ",r.a.createElement("select",{"data-testid":"method-input",name:"method",id:"method",onChange:e},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito")))}}]),a}(n.Component),G=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.handleChange;return r.a.createElement("label",{htmlFor:"tag"}," Categoria: ",r.a.createElement("select",{"data-testid":"tag-input",name:"tag",id:"tag",onChange:e},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade")))}}]),a}(n.Component),M=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.inputValue;return r.a.createElement("label",{htmlFor:"value"},"Valor: ",r.a.createElement("input",{"data-testid":"value-input",type:"text",name:"value",id:"value",onChange:t,value:a}))}}]),a}(n.Component),X=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).state={id:0,value:Number(0),description:"",currency:"",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.handleChange=e.handleChange.bind(Object(C.a)(e)),e.submitExpense=e.submitExpense.bind(Object(C.a)(e)),e.updateExchangeRates=e.updateExchangeRates.bind(Object(C.a)(e)),e}return Object(x.a)(a,[{key:"updateExchangeRates",value:function(){var e=Object(D.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getExchangeRates,e.next=3,t();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,a=t.id,n=t.value;this.setState(Object(y.a)({},a,n))}},{key:"submitExpense",value:function(e){e.preventDefault(),this.updateExchangeRates();var t=this.props,a=t.dispatchExpense,n=t.exchangeRates,r=this.state;a({id:r.id,value:r.value,description:r.description,currency:r.currency,method:r.method,tag:r.tag,exchangeRates:n}),this.setState((function(e){return{id:e.id+1}})),this.setState({value:0})}},{key:"render",value:function(){var e=this,t=this.state.value;return r.a.createElement("form",null,r.a.createElement(M,{handleChange:this.handleChange,inputValue:t}),r.a.createElement(A,{handleChange:this.handleChange}),r.a.createElement(U,{handleChange:this.handleChange}),r.a.createElement(B,{handleChange:this.handleChange}),r.a.createElement(G,{handleChange:this.handleChange}),r.a.createElement("button",{type:"submit",onClick:function(t){return e.submitExpense(t)}},"Adicionar despesa"))}}]),a}(n.Component),P=Object(u.b)((function(e){return{expenses:e.wallet.expenses,exchangeRates:e.wallet.exchangeRates}}),(function(e){return{dispatchExpense:function(t){return e(function(e){return{type:"SEND_EXPENSES",payload:e}}(t))},getExchangeRates:function(t){return e(T(t))}}}))(X),V=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={},n.updateExpenses=n.updateExpenses.bind(Object(C.a)(n)),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.updateExpenses()}},{key:"componentDidUpdate",value:function(e){var t=this.props.expenses;e.expenses!==t&&this.updateExpenses()}},{key:"updateExpenses",value:function(){return this.props.expenses}},{key:"render",value:function(){var e=this.props,t=e.email,a=e.expenses,n=0;return void 0!==a&&(n=a.reduce((function(e,t){return e+=t.value*t.exchangeRates[t.currency].ask}),0)),r.a.createElement("header",null,r.a.createElement("h3",{"data-testid":"email-field"},"Email: ".concat(t)),r.a.createElement("p",null,"Total de despesas: ",r.a.createElement("span",{"data-testid":"total-field"},"".concat(n.toFixed(2))),r.a.createElement("span",{"data-testid":"header-currency-field"}," BRL")))}}]),a}(n.Component),H=Object(u.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(V),I=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this)).deleteExpense=e.deleteExpense.bind(Object(C.a)(e)),e}return Object(x.a)(a,[{key:"componentDidUpdate",value:function(){var e=document.getElementsByTagName("tr");console.log(e)}},{key:"deleteExpense",value:function(e){(0,this.props.dispatchDelete)(e)}},{key:"render",value:function(){var e=this,t=this.props.expenses;return t.length>0?r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e,t){return r.a.createElement("th",{key:"".concat(e).concat(t)},e)})))),r.a.createElement("tbody",null,t.map((function(t){var a=t.description,n=t.value,c=t.currency,l=t.method,i=t.tag,u=t.exchangeRates[c],o=Number(u.ask);return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,a),r.a.createElement("td",null,i),r.a.createElement("td",null,l),r.a.createElement("td",null,n),r.a.createElement("td",null,u.name.split("/")[0]),r.a.createElement("td",null,o.toFixed(2)),r.a.createElement("td",null,(n*o).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn"},"Editar"),r.a.createElement("button",{onClick:function(){return e.deleteExpense(t)},type:"button","data-testid":"delete-btn"},"Excluir")))})))):r.a.createElement("h1",null,"Voc\xea n\xe3o tem despesas cadastradas.")}}]),a}(n.Component),W=Object(u.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{dispatchDelete:function(t){return e(function(e){return{type:"DELETE_EXPENSE",payload:e}}(t))}}}))(I),z=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(O.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement("main",null,r.a.createElement("section",null,r.a.createElement(P,null)),r.a.createElement("section",null,r.a.createElement("h1",null,"Carteira"),r.a.createElement("article",null,r.a.createElement("h3",null,"Despesas:"),r.a.createElement(W,null)))))}}]),a}(r.a.Component);var J=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Hello, TrybeWallet!"),r.a.createElement(j.c,null,r.a.createElement(j.a,{path:"/carteira",component:z}),r.a.createElement(j.a,{path:"/",component:F})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a,null,r.a.createElement(u.a,{store:g},r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.293d06e1.chunk.js.map